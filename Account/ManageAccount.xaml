<Page x:Class="FrameIt.Account.ManageAccount"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      Title="ManageAccount"
      Background="{DynamicResource MaterialDesignPaper}">

    <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
        <StackPanel Width="350">

            <Grid Width="150" Height="150" Margin="0,0,0,10">
                <Ellipse x:Name="AvatarCircle" Stroke="{DynamicResource PrimaryHueMidBrush}" StrokeThickness="2">
                    <Ellipse.Fill>
                        <ImageBrush ImageSource="{Binding CurrUser.AvatarImage, FallbackValue='Images/GrayLiara.jpg'}" Stretch="UniformToFill"/>
                    </Ellipse.Fill>
                </Ellipse>

                <Button Content="Change" Click="ChangePicture_Click">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                            <Setter Property="Opacity" Value="0"/>
                            <Setter Property="Background" Value="#80000000"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Opacity" Value="1"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </Grid>

            <Grid Margin="0,0,0,20">
                <Grid x:Name="DisplayNameArea" Visibility="Visible">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="1" 
                               Text="{Binding CurrUser.Name}" 
                               Style="{StaticResource MaterialDesignHeadline4TextBlock}" 
                               Foreground="White" 
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Center"/>

                    <Button Grid.Column="2" 
                            Style="{StaticResource MaterialDesignIconButton}" 
                            Click="ToggleEditName_Click" 
                            HorizontalAlignment="Left" 
                            Margin="5,0,0,0">
                        <materialDesign:PackIcon Kind="Edit" Foreground="White" Opacity="0.6"/>
                    </Button>
                </Grid>

                <StackPanel x:Name="EditNameArea" Orientation="Horizontal" HorizontalAlignment="Center" Visibility="Collapsed">
                    <TextBox x:Name="NameInput" 
                             Text="{Binding CurrUser.Name, UpdateSourceTrigger=PropertyChanged}" 
                             Foreground="White"
                             MinWidth="200" FontSize="24" materialDesign:TextFieldAssist.HasClearButton="True"/>
                    <Button Style="{StaticResource MaterialDesignIconButton}" Click="ToggleEditName_Click" Foreground="Green">
                        <materialDesign:PackIcon Kind="Check" />
                    </Button>
                    <Button Style="{StaticResource MaterialDesignIconButton}" Click="CancelEditName_Click" Foreground="Red">
                        <materialDesign:PackIcon Kind="Close" />
                    </Button>
                </StackPanel>
            </Grid>

            <Grid Margin="0,0,0,10">
                <Button x:Name="EmailBtn" Content="Change Email" 
                        Style="{StaticResource MaterialDesignRaisedButton}" 
                        Click="ToggleEditEmail_Click"/>

                <StackPanel x:Name="EditEmailArea" Orientation="Horizontal" HorizontalAlignment="Center" Visibility="Collapsed">
                    <TextBox x:Name="EmailInput" 
                             Text="{Binding CurrUser.Email, UpdateSourceTrigger=PropertyChanged}" 
                             Foreground="White"
                             MinWidth="200" materialDesign:TextFieldAssist.HasClearButton="True" FontSize="16"/>
                    <Button Style="{StaticResource MaterialDesignIconButton}" Click="ToggleEditEmail_Click" Foreground="Green">
                        <materialDesign:PackIcon Kind="Check" />
                    </Button>
                    <Button Style="{StaticResource MaterialDesignIconButton}" Click="CancelEditEmail_Click" Foreground="Red">
                        <materialDesign:PackIcon Kind="Close" />
                    </Button>
                </StackPanel>
            </Grid>

            <Grid Margin="0,0,0,10">
                <Button x:Name="PassBtn" Content="Change Password" 
                        Style="{StaticResource MaterialDesignRaisedButton}" 
                        Click="ToggleEditPass_Click"/>

                <StackPanel x:Name="EditPassArea" Orientation="Horizontal" HorizontalAlignment="Center" Visibility="Collapsed">
                    <PasswordBox x:Name="PassInput" 
                                 Foreground="White"
                                 MinWidth="200" FontSize="16"/>
                    <Button Style="{StaticResource MaterialDesignIconButton}" Click="ToggleEditPass_Click" Foreground="Green">
                        <materialDesign:PackIcon Kind="Check" />
                    </Button>
                    <Button Style="{StaticResource MaterialDesignIconButton}" Click="CancelEditPass_Click" Foreground="Red">
                        <materialDesign:PackIcon Kind="Close" />
                    </Button>
                </StackPanel>
            </Grid>

            <Button Content="Log Out" Margin="0,40,0,0" 
                    Background="#FFD32F2F" BorderBrush="#FFD32F2F" 
                    Foreground="White" Click="Logout_Click"/>

        </StackPanel>
    </Grid>
</Page>